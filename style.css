@import url("https://fonts.googleapis.com/css2?family=Anton&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap");

*,
*::after,
*::before {
    box-sizing: border-box;
}

:root {
    font-size: 12px;
    --color-text: #292828;
    --color-bg: #ddd;
    --color-link: #000;
    --color-link-hover: #000;
    --page-padding: 1rem;
    --angle: -15deg;
    --trans-content: -30vh;
}

body {
    margin: 0;
    color: var(--color-text);
    background-color: var(--color-bg);
    font-family: "Poppins", sans-serif;
    text-transform: uppercase;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
}

.noscroll {
    height: 100dvh;
    width: 100%;
    overflow: hidden;
    position: fixed;
    left: 0;
    right: 0;
}

/* General Link and Focus Styles */
a {
    text-decoration: none;
    color: var(--color-link);
    outline: none;
    cursor: pointer;
}

a:hover {
    text-decoration: underline;
    color: var(--color-link-hover);
    outline: none;
}

a:focus {
    outline: none;
    background: lightgrey;
}

a:focus:not(:focus-visible) {
    background: transparent;
}

a:focus-visible {
    outline: 2px solid red;
    background: transparent;
}

.hidden {
    opacity: 0;
    pointer-events: none;
}

/* Dummy sections for scrolling context */
.dummy-section {
    width: 100%;
    height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
}

.dummy-section--top {
    background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
}

.dummy-section--bottom {
    background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
}

.dummy-content {
    text-align: center;
}

.dummy-content h2 {
    font-size: 3rem;
    margin-bottom: 1rem;
    font-family: "Anton", sans-serif;
}

.dummy-content p {
    font-size: 1.5rem;
    opacity: 0.8;
}

/* Main container for the grid */
.intro {
    width: 100%;
    max-height: 1080px;
    overflow: hidden;
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
    background: #000;
}

/* --- REWRITTEN GRID LOGIC --- */

/* 
 * The Grid Container (.grid)
 * - NO LONGER has width or height. Its size is now determined by its content.
 * - It still acts as the flex container for the rows and the pivot point for the isometric rotation.
 */
.grid {
    display: flex;
    flex-direction: column;
    gap: 1.5vmin;
    flex: none;
    position: relative;
    transform: rotate(var(--angle));
    transform-origin: center center;
}

/*
 * The Row Container (.row)
 * - NOW DEFINES THE WIDTH of the layout. By setting a large viewport-relative width,
 *   we ensure the grid is always wider than the screen, which is necessary for the isometric effect.
 * - It remains a flex container for the items.
 */
.row {
    display: flex;
    gap: 1.5vmin;
    flex-direction: row;
    margin: 0 auto; /* Ensures the wide row is centered within the grid */
    will-change: transform;
}

/*
 * The Image Item Container (.row__item)
 * - flex: 1; allows each item to take up an equal amount of space within the 180vw row.
 * - aspect-ratio: 1 / 1; THIS IS THE KEY CHANGE. It forces the container to be a perfect square.
 *   Its height will always match its dynamically calculated width. This solves the squishing problem.
 */
.row__item {
    position: relative;
    flex: 1;
    min-width: 0;
    
}

.row__item-inner {
    position: relative;
    width: auto;
    
    overflow: hidden;
    border-radius: 10px;
}

/*
 * The Image Element (.row__item-img)
 * - Its job is to fill the parent container (.row__item-inner) perfectly.
 * - object-fit: cover; ensures the image covers the entire square area without distortion,
 *   cropping any excess from the original image.
 */
.row__item-img {
    display: block;
    width: clamp(37.5rem, 33.5351rem + 14.8221vw, 46.875rem);
    height: auto;
    object-fit: cover;
    object-position: 50% 50%;
  aspect-ratio: 16 / 9;
  min-width: 500px;
}

/* --- END OF REWRITTEN SECTION --- */


.enter {
    color: rgba(0, 0, 0, 0.8);
    position: absolute;
    text-transform: uppercase;
    padding: 1.75rem 4rem;
    font-weight: 600;
    z-index: 100;
    font-family: "Poppins", sans-serif;
    font-size: 1.5rem;
    color: white;
    background: rgba(0, 0, 0, 0.3);
    border: 1px solid #606068;
    border-radius: 3rem;
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    background-size: 250px, 100%;
    transition: all 0.3s;
    cursor: pointer;
}

.enter:focus::before,
.enter:hover::before {
    background-color: rgba(0, 0, 0, 0.2);
}

.fullview {
    position: absolute;
    width: 100%;
    height: 100%;
    top: 0;
    left: 0;
    pointer-events: none;
}

.fullview .row__item-inner {
    border-radius: 0px;
}

/* Lightbox Gallery Styles (Unchanged) */
.lightbox {
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    width: 100vw !important;
    height: 100vh !important;
    max-width: none !important;
    max-height: none !important;
    z-index: 1000;
    background: rgba(0, 0, 0, 0.96);
    padding: 0 !important;
    margin: 0 !important;
    border: none !important;
    color: white;
    overflow: hidden;
    opacity: 0;
    transform: scale(0.96) translateY(10px);
    transition: opacity 0.6s cubic-bezier(0.16, 1, 0.3, 1), 
                transform 0.6s cubic-bezier(0.16, 1, 0.3, 1);
}

.lightbox::backdrop {
    background: rgba(0, 0, 0, 0) !important;
    backdrop-filter: blur(0px) !important;
    transition: background 0.6s cubic-bezier(0.16, 1, 0.3, 1), 
                backdrop-filter 0.6s cubic-bezier(0.16, 1, 0.3, 1) !important;
}

.lightbox[open] {
    opacity: 1;
    transform: scale(1) translateY(0);
}

.lightbox[open]::backdrop {
    background: rgba(0, 0, 0, 0.88) !important;
    backdrop-filter: blur(8px) !important;
}

.lightbox:not([open]) {
    display: none;
}

.lightbox[open] .lightbox__content {
    animation: contentFadeIn 0.8s cubic-bezier(0.16, 1, 0.3, 1) forwards;
}

@keyframes contentFadeIn {
    0% { opacity: 0; transform: translateY(15px); }
    60% { opacity: 0.8; }
    100% { opacity: 1; transform: translateY(0); }
}

.lightbox__content {
    position: relative;
    width: 100%;
    height: 100%;
    display: flex;
    flex-direction: column;
    max-width: 100vw;
    max-height: 100vh;
}

.lightbox__header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1rem 2rem;
    background: rgba(0, 0, 0, 0.5);
}

.lightbox__title {
    font-family: "Anton", sans-serif;
    font-size: 1.5rem;
    margin: 0;
    color: white;
}

.lightbox__close {
    background: none;
    border: none;
    color: white;
    font-size: 2rem;
    cursor: pointer;
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
    transition: background-color 0.3s ease;
}

.lightbox__close:hover,
.lightbox__close:focus {
    background-color: rgba(255, 255, 255, 0.1);
    outline: none;
}

.lightbox__carousel {
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    overflow: hidden;
    padding: 0 100px;
}

.lightbox__slide {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    transition: opacity 0.6s cubic-bezier(0.16, 1, 0.3, 1),
                transform 0.6s cubic-bezier(0.16, 1, 0.3, 1);
    padding: 2rem 100px;
    pointer-events: none;
}

.lightbox__slide.active {
    opacity: 1;
    transform: translateX(0);
    z-index: 1;
    pointer-events: auto;
}

.lightbox__slide.slide-in-right { animation: slideInRight 0.6s cubic-bezier(0.16, 1, 0.3, 1) forwards; }
.lightbox__slide.slide-in-left { animation: slideInLeft 0.6s cubic-bezier(0.16, 1, 0.3, 1) forwards; }
.lightbox__slide.slide-out-right { animation: slideOutRight 0.6s cubic-bezier(0.16, 1, 0.3, 1) forwards; }
.lightbox__slide.slide-out-left { animation: slideOutLeft 0.6s cubic-bezier(0.16, 1, 0.3, 1) forwards; }

@keyframes slideInRight {
    from { opacity: 0; transform: translateX(100%); }
    to { opacity: 1; transform: translateX(0); }
}
@keyframes slideInLeft {
    from { opacity: 0; transform: translateX(-100%); }
    to { opacity: 1; transform: translateX(0); }
}
@keyframes slideOutRight {
    from { opacity: 1; transform: translateX(0); }
    to { opacity: 0; transform: translateX(100%); }
}
@keyframes slideOutLeft {
    from { opacity: 1; transform: translateX(0); }
    to { opacity: 0; transform: translateX(-100%); }
}

.lightbox__image {
    width: 100%;
    height: auto;
    max-height: 100%;
    aspect-ratio: 16/9;
    object-fit: cover;
    border-radius: 12px;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.lightbox__nav-btn {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    background: rgba(255, 255, 255, 0.06);
    border: 1px solid rgba(255, 255, 255, 0.12);
    color: white;
    width: 48px;
    height: 48px;
    border-radius: 50%;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.4s cubic-bezier(0.16, 1, 0.3, 1);
    backdrop-filter: blur(12px);
    z-index: 10;
    opacity: 0;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
}

.lightbox__nav-btn svg {
    width: 20px;
    height: 20px;
    stroke: rgba(255, 255, 255, 0.9);
    stroke-width: 2.5;
}

.lightbox__nav-btn:hover,
.lightbox__nav-btn:focus {
    background: rgba(255, 255, 255, 0.12);
    border-color: rgba(255, 255, 255, 0.2);
    outline: none;
    opacity: 1 !important;
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.25);
    transform: translateY(-50%) scale(1.05);
}

.lightbox__nav-prev { left: 40px; }
.lightbox__nav-next { right: 40px; }

.lightbox[open] .lightbox__nav-prev { animation: navBtnFadeInLeft 0.8s 0.4s cubic-bezier(0.16, 1, 0.3, 1) both; }
.lightbox[open] .lightbox__nav-next { animation: navBtnFadeInRight 0.8s 0.4s cubic-bezier(0.16, 1, 0.3, 1) both; }

@keyframes navBtnFadeInLeft {
    from { opacity: 0; transform: translate(-15px, -50%) scale(0.8); }
    to { opacity: 0.75; transform: translate(0, -50%) scale(1); }
}
@keyframes navBtnFadeInRight {
    from { opacity: 0; transform: translate(15px, -50%) scale(0.8); }
    to { opacity: 0.75; transform: translate(0, -50%) scale(1); }
}

.lightbox__controls {
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 1rem 2rem;
    background: rgba(0, 0, 0, 0.5);
}

.lightbox__dots {
    display: flex;
    gap: 0.5rem;
    justify-content: center;
    align-items: center;
}

.lightbox__dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.2);
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.22, 1, 0.36, 1);
    border: none;
    padding: 0;
    margin: 0 4px;
    opacity: 0;
    transform: scale(0.8);
    animation: dotEnter 0.5s cubic-bezier(0.22, 1, 0.36, 1) forwards;
}

.lightbox__dot:nth-child(1) { animation-delay: 0.3s; }
.lightbox__dot:nth-child(2) { animation-delay: 0.35s; }
.lightbox__dot:nth-child(3) { animation-delay: 0.4s; }
.lightbox__dot:nth-child(4) { animation-delay: 0.45s; }
.lightbox__dot:nth-child(5) { animation-delay: 0.5s; }
.lightbox__dot:nth-child(n+6) { animation-delay: 0.55s; }

@keyframes dotEnter {
    from { opacity: 0; transform: scale(0.5); }
    to { opacity: 1; transform: scale(1); }
}

.lightbox__dot.active {
    background: rgba(255, 255, 255, 0.9);
    transform: scale(1.2);
    box-shadow: 0 0 8px rgba(255, 255, 255, 0.5);
}

/* Media Queries & Scrollbar (Unchanged) */
@media screen and (max-width: 768px) {
    .lightbox__header { padding: 0.5rem 1rem; }
    .lightbox__title { font-size: 1.2rem; }
    .lightbox__close { font-size: 1.5rem; width: 30px; height: 30px; }
    .lightbox__carousel { padding: 0 60px; }
    .lightbox__slide { padding: 1rem 60px; }
    .lightbox__nav-btn { width: 40px; height: 40px; font-size: 1.5rem; }
    .lightbox__nav-prev { left: 10px; }
    .lightbox__nav-next { right: 10px; }
    .lightbox__controls { padding: 0.5rem 1rem; }
    .lightbox__dot { width: 8px; height: 8px; }
}

::-webkit-scrollbar { height: 13px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { border-top: 6px solid #000; background: #555; width: 50%; }
::-webkit-scrollbar-thumb:hover { background: #bbb; }

@media screen and (min-width: 53em) {
    body { --page-padding: 2rem 3rem; }
    .dummy-content h2 { font-size: clamp(2rem, 20vh, 16rem); }
}